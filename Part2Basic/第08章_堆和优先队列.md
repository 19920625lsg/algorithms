# 第08章 堆和优先队列

## 8.1 什么是优先队列？
### 普通队列和优先队列的比较
+ 普通队列：先进先出；后进后出
+ 优先队列：出队顺序和入队顺序无关，和优先级相关，优先级高地先出队
### 优先队列的应用
+ 医院排队，VIP客户优先
+ Windows任务管理器，系统任务优先
### 优先队列不同实现方式的时间复杂度
![优先队列不同实现方式的时间复杂度](images/第08章_堆和优先队列/优先队列不同实现方式的时间复杂度.png)

## 8.2 堆的基础
### 二叉堆与二叉树的区别和联系
> 二叉堆是一棵完全二叉树。
### 完全二叉树与满二叉树的比较
+ 满二叉树和完全二叉树的区别：
  > 对于满二叉树，除最后一层无任何子节点外，每一层上的所有结点都有两个子结点二叉树。
                   
  > 而完全二叉树是效率很高的数据结构，完全二叉树是由满二叉树而引出来的。对于深度为K的，有n个结点的二叉树，当且仅当其每一个结点都与深度为K的满二叉树中编号从1至n的结点一一对应时称之为完全二叉树。
+ 满二叉树定义
  > 定义：一个二叉树，如果每一个层的结点数都达到最大值，则这个二叉树就是满二叉树。也就是说，如果一个二叉树的层数为K，且结点总数是(2^k) -1 ，则它就是满二叉树。
  > ![满二叉树](images/第08章_堆和优先队列/满二叉树.jpg)
+ 完全二叉树
  > 定义：若设二叉树的深度为h，除第 h 层外，其它各层 (1～h-1) 的结点数都达到最大个数，第 h 层所有的结点都连续集中在最左边，这就是完全二叉树。
  > ![完全二叉树](images/第08章_堆和优先队列/完全二叉树.png)

### 二叉堆的性质
> 对比：二分搜索树是左节点小于父节点、右节点大于父节点的二叉树
+ 每个每个节点的值不大于其父亲节点的值--->最大二叉堆，简称最大堆，因为此时根节点肯定是值最大的节点
+ 每个每个节点的值不小于其父亲节点的值--->最小二叉堆，简称最小堆，因为此时根节点肯定是值最小的节点

注意：最大堆中，第k层的节点不一定比第k-1层的节点小，只要保证比自己的父亲节点小即可
![二叉堆的性质](images/第08章_堆和优先队列/二叉堆的性质.png)

### 最大堆的表示
> 基于数组表示最大堆，注意数组下标是从1开始的
![基于数组表示最大堆](images/第08章_堆和优先队列/基于数组表示最大堆.png)

一个节点在数组中的索引为i，则其父亲节点和左右孩子节点在数组中的索引表示如下：
+ 父亲节点索引 = `i / 2`，注意是整除
+ 左孩子的索引 = `2 * i`
+ 右孩子的索引 = `2 * i + 1`
![数组下标从1开始存储最大堆](images/第08章_堆和优先队列/数组下标从1开始存储最大堆.png)

数组下标从0开始存储最大堆时，节点索引公式需要修改如下：
+ 父亲节点索引 = `(i - 1) / 2`，注意是整除
+ 左孩子的索引 = `2 * i + 1`
+ 右孩子的索引 = `2 * i + 2`
![数组下标从0开始存储最大堆](images/第08章_堆和优先队列/数组下标从0开始存储最大堆.png)
# 第05章 数位DP
## 5.1 数位DP的通用解法
问题的一般形式是这样的：

定义一个条件A，比如：被7整除、数位中含有3等等，询问区间[L, R]中有几个数满足条件A

L和R的范围一般非常大，比如$10^{18}$，通过数位DP，我们会发现这些问题的规模实际上是$log_{10}R$

数位DP就是考虑数字的每一位，问题的规模变为$log_{10}N$，每一位作为不同的阶段，设计状态。我们从高位往低位依次枚举(高位往地位枚举，当高位确定时，低位能确定下来；但是低位确定下来，高位不一定能确定下来)。

每一位的数选择的范围是不同的，依据前面选的数决定

比如N是1230，假设前两位枚举的数是1和2，也就是计算了12开头的贡献，此时枚举第三位，可选的范围只有0~3(`要是第3位大于3，那么12xx肯定要大约1230了`)；如果前两位枚举的数是1和0，此时枚举第三位，可选的范围就是0~9(`因为10xx肯定是小于1230的，所以后面两位都随便取就好啦`)

因此我们用一个变量eq或者less表示在**枚举当前位之前**，**每一位是不是都和N选地一样**，具体情况如下：
+ 1.前面一位小于N对应位上的数，那么当前位及后面的位就都可以随便选了(0~9都可以)，即后面的位都不用判了
+ 2.前面一位等于N对应位上的数，那么当前位的数必须小于等于N对应位上的数，按照123的逻辑继续判下一位即可
+ 3.前面一位大于N对应位上的数，不用判了，肯定不符合题目要求了(实际我们再判前面一位的时候根本不会去枚举到这种大于N对应位的情况)

具体代码逻辑如下：

当前位设为第dep位，N的第dep位为A[dep]，假设天上k，如果填上k，
+ 如果采用eq变量，$eq = (eq && (A[dep] == k))$，表示前面的位以及当前的第dep位是否都和N的对应位相等。
  > 可选的最大值是：$eq : A[dep] : 9$，解释如下：
  + 如果eq为真，表示当前位及往前的位都和N相等，当前位只能填N对应的位即A[dep]
  + 如果eq为假，表示前面的各位中有一些位小于N的对应位了，当前位随便填0~9都可以，最大值显然是9
+ 如果采用less变量，$less = (less || (A[dep] > k))$，表示前面的位以及当前的第dep位是否有小于N的对应位的
  > 可选的最大值计算表达式是：$less : 9 : A[dep]$，解释如下：
  + 如果less为真，表示前面的各位中有一些位小于N的对应位了，当前位随便填0~9都可以，最大值显然是9
  + 如果less为假，表示当前位及往前的位都和N相等，当前位只能填N对应的位即A[dep]
## 5.2~5.5 知识精练
### [BZOJ 1799 同类分布](https://www.luogu.com.cn/problem/P4127)
> 题解：https://www.luogu.com.cn/problem/solution/P4127
### [HDU 3709 Balanced Number](https://ac.nowcoder.com/acm/problem/121921)
> 题解：https://www.cnblogs.com/shenben/p/6708758.html
### [HDU 4507 恨7不成妻](http://acm.hdu.edu.cn/showproblem.php?pid=4507)
> 题解：https://blog.csdn.net/qq_37025443/article/details/78472991
### [CF55D Beautiful numbers](https://www.luogu.com.cn/problem/CF55D)
> 题解：https://www.luogu.com.cn/problem/solution/CF55D

